<!-- src/routes/map/+page.svelte -->
<!-- 
=============================================================================
WEATHER RADAR MAPA - KOMPLETNE OKOMENTOVANÃ KÃ“D PRE UÄŒENIE
=============================================================================
Tento sÃºbor vytvÃ¡ra interaktÃ­vnu mapu s animovanÃ½m weather radarom.
PouÅ¾itÃ© technolÃ³gie:
- SvelteKit (frontend framework)
- Leaflet.js (mapa bez API key)  
- OpenStreetMap (free map tiles)
- RainViewer API (radar dÃ¡ta)
=============================================================================
-->

<script>
	// ==========================================================================
	// 1. IMPORTS A REACTIVE VARIABLES
	// ==========================================================================
	
	// onMount = Svelte lifecycle hook - spustÃ­ sa keÄ sa component pripojÃ­ do DOM
	import { onMount } from 'svelte';
	
	// Reactive variables = automaticky sa re-renderuje UI keÄ sa zmenia
	let mapContainer;        // HTML element kde sa vytvorÃ­ mapa
	let map;                 // Leaflet map instance (hlavnÃ½ objekt mapy)
	let radarTimestamps = [];// Array vÅ¡etkÃ½ch dostupnÃ½ch radar snÃ­mok
	let currentFrame = 0;    // Index aktuÃ¡lne zobrazenej snÃ­mky
	let isAnimating = false; // Boolean - beÅ¾Ã­ animÃ¡cia?
	let animationInterval;   // Interval ID pre animÃ¡ciu (na zastavenie)
	let mapLoaded = false;   // Boolean - je mapa naÄÃ­tanÃ¡?

	// ==========================================================================
	// 2. NAÄŒÃTANIE LEAFLET KNIÅ½NICE DYNAMICKY
	// ==========================================================================
	
	/**
	 * loadLeaflet() - NaÄÃ­ta Leaflet.js kniÅ¾nicu do strÃ¡nky
	 * 
	 * PREÄŒO DYNAMICKY?
	 * - SvelteKit je SSR (Server Side Rendering)
	 * - Leaflet potrebuje window objekt (len v browseri)
	 * - DynamickÃ© naÄÃ­tanie = bezpeÄnÃ© pre SSR
	 */
	async function loadLeaflet() {
		console.log('ğŸ”„ ZaÄÃ­nam naÄÃ­tavaÅ¥ Leaflet kniÅ¾nicu...');
		
		// KROK 1: NaÄÃ­tanie CSS Å¡tÃ½lov pre Leaflet
		// Bez CSS by mapa vyzerala rozbitÃ¡ (Å¾iadne ikonky, tlaÄidlÃ¡)
		const cssLink = document.createElement('link');
		cssLink.rel = 'stylesheet';  // Typ: CSS stylesheet
		cssLink.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
		document.head.appendChild(cssLink); // Pridanie do <head>
		
		console.log('âœ… Leaflet CSS naÄÃ­tanÃ©');

		// KROK 2: NaÄÃ­tanie JavaScript kÃ³du Leaflet
		const script = document.createElement('script');
		script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
		
		// PROMISE pattern - ÄakÃ¡me kÃ½m sa script naÄÃ­ta
		return new Promise((resolve) => {
			script.onload = () => {
				console.log('âœ… Leaflet JavaScript naÄÃ­tanÃ½');
				// window.L je teraz dostupnÃ© (hlavnÃ½ Leaflet objekt)
				resolve();
			};
			document.head.appendChild(script); // Pridanie scriptu do <head>
		});
	}

	// ==========================================================================
	// 3. ZÃSKANIE RADAR DÃTA Z RAINVIEWER API
	// ==========================================================================
	
	/**
	 * getRainViewerData() - Stiahne zoznam dostupnÃ½ch radar snÃ­mok
	 * 
	 * RAINVIEWER API:
	 * - Free weather radar dÃ¡ta
	 * - Poskytuje timestamps a paths pre radar tiles
	 * - MÃ¡ past frames (minulosÅ¥) a nowcast (predpoveÄ)
	 */
	async function getRainViewerData() {
		try {
			console.log('ğŸŒ§ï¸ ZÃ­skavam radar dÃ¡ta z RainViewer API...');
			
			// CORS PROXY PROBLÃ‰M A RIEÅ ENIE:
			// RainViewer API mÃ¡ CORS policy - nedÃ¡ sa volaÅ¥ priamo z browsera
			// allorigins.win = CORS proxy service (obchÃ¡dza CORS)
			const proxyUrl = 'https://api.allorigins.win/get?url=';
			const targetUrl = encodeURIComponent('https://api.rainviewer.com/public/weather-maps.json');
			
			// Fetch cez proxy
			const response = await fetch(proxyUrl + targetUrl);
			const proxyData = await response.json();
			
			// Proxy vrÃ¡ti {contents: "actual data"} - musÃ­me parsovaÅ¥
			const data = JSON.parse(proxyData.contents);
			
			// Å TRUKTÃšRA RAINVIEWER API RESPONSE:
			// {
			//   radar: {
			//     past: [{time: 1234567890, path: "/path/to/image"}, ...],
			//     nowcast: [{time: 1234567890, path: "/path/to/image"}, ...]
			//   }
			// }
			
			const pastFrames = data.radar.past || [];      // MinulosÅ¥ (reÃ¡lne merania)
			const nowcastFrames = data.radar.nowcast || []; // BudÃºcnosÅ¥ (predpoveÄ)
			
			// Spojenie past + nowcast = kompletnÃ¡ animÃ¡cia
			radarTimestamps = [...pastFrames, ...nowcastFrames];
			
			// Å tart s poslednou snÃ­mkou (najnovÅ¡ie dÃ¡ta)
			currentFrame = radarTimestamps.length - 1;
			
			console.log(`âœ… ZÃ­skanÃ© ${radarTimestamps.length} radar snÃ­mok`);
			console.log(`ğŸ“… ÄŒasovÃ½ rozsah: ${pastFrames.length} past + ${nowcastFrames.length} nowcast`);
			
		} catch (error) {
			console.error('âŒ Chyba pri zÃ­skavanÃ­ radar dÃ¡t:', error);
			// Graceful error handling - app funguje aj bez radaru
		}
	}

	// ==========================================================================
	// 4. INICIALIZÃCIA LEAFLET MAPY
	// ==========================================================================
	
	/**
	 * initMap() - VytvorÃ­ Leaflet mapu a pripojÃ­ ju k DOM elementu
	 * 
	 * LEAFLET ZÃKLADY:
	 * - L.map() = vytvorÃ­ mapu v danom HTML elemente
	 * - L.tileLayer() = pridÃ¡ map tiles (obrÃ¡zky mapy)
	 * - setView() = nastavÃ­ pozÃ­ciu a zoom
	 */
	async function initMap() {
		// Kontrola Äi je Leaflet naÄÃ­tanÃ½
		if (!window.L) {
			console.error('âŒ Leaflet nie je naÄÃ­tanÃ½!');
			return;
		}

		console.log('ğŸ—ºï¸ Inicializujem Leaflet mapu...');

		// VYTVORENIE MAPY:
		// - mapContainer = HTML div element (bind:this={mapContainer})
		// - [48.7, 19.5] = sÃºradnice Slovenska (latitude, longitude)
		// - 6 = zoom level (1=celÃ½ svet, 18=ulice)
		map = window.L.map(mapContainer).setView([48.7, 19.5], 6);

		// PRIDANIE MAP TILES:
		// Tiles = malÃ© obrÃ¡zky (256x256px) ktorÃ© sa skladajÃº do mapy
		// OpenStreetMap = free, open source map tiles
		// {s} = server (a,b,c), {z} = zoom, {x},{y} = tile coordinates
		window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: 'Â© OpenStreetMap contributors' // PovinnÃ© pre OSM
		}).addTo(map);

		mapLoaded = true;
		console.log('âœ… Mapa ÃºspeÅ¡ne vytvorenÃ¡');

		// Po naÄÃ­tanÃ­ mapy zÃ­skaj radar dÃ¡ta
		await getRainViewerData();
		
		// Ak mÃ¡me radar dÃ¡ta, zobraz prvÃº snÃ­mku
		if (radarTimestamps.length > 0) {
			showRadarFrame(currentFrame);
		}
	}

	// ==========================================================================
	// 5. ZOBRAZENIE RADAR SNÃMKY NA MAPE
	// ==========================================================================
	
	// GlobÃ¡lna premennÃ¡ pre aktuÃ¡lny radar layer
	let radarLayer = null;

	/**
	 * showRadarFrame() - ZobrazÃ­ konkrÃ©tnu radar snÃ­mku na mape
	 * 
	 * @param {number} frameIndex - Index snÃ­mky v radarTimestamps array
	 * 
	 * PRINCÃP RADAR OVERLAY:
	 * - Radar dÃ¡ta = PNG obrÃ¡zky s transparentnosÅ¥ou
	 * - PrekrÃ½vajÃº sa cez zÃ¡kladnÃº mapu
	 * - FarebnÃ© = dÃ¡Å¾Ä, transparentnÃ© = Å¾iadny dÃ¡Å¾Ä
	 */
	function showRadarFrame(frameIndex) {
		// ValidÃ¡cia vstupu
		if (!radarTimestamps[frameIndex] || !map) {
			console.warn('âš ï¸ NeplatnÃ½ frame index alebo mapa nie je pripravenÃ¡');
			return;
		}
		
		const frame = radarTimestamps[frameIndex];
		console.log(`ğŸ¬ Zobrazujem radar frame ${frameIndex + 1}/${radarTimestamps.length}`);
		
		// ODSTRÃNENIE PREDCHÃDZAJÃšCEHO RADAR LAYERA:
		// VÅ¾dy odstranÃ­me starÃ½ layer pred pridanÃ­m novÃ©ho
		// (inak by sa prekrÃ½vali a spomaÄ¾ovali by mapu)
		if (radarLayer) {
			map.removeLayer(radarLayer);
			radarLayer = null;
		}

		// VYTVORENIE RADAR TILE URL:
		// RainViewer poskytuje radar dÃ¡ta ako tile server
		// Format: https://tilecache.rainviewer.com/v2/radar/{timestamp}/512/{z}/{x}/{y}/{color}/{smooth}_{snow}.png
		// - {timestamp} = Unix timestamp snÃ­mky
		// - 512 = tile size (512x512px)
		// - {z}/{x}/{y} = Å¡tandardnÃ© tile coordinates
		// - 4 = color scheme (4 = universal rainbow)
		// - 1_1 = smooth_snow (1=smooth, 1=include snow)
		const radarUrl = `https://tilecache.rainviewer.com/v2/radar/${frame.time}/512/{z}/{x}/{y}/4/1_1.png`;
		
		// VYTVORENIE NOVÃ‰HO RADAR LAYERA:
		radarLayer = window.L.tileLayer(radarUrl, {
			opacity: 0.7,                    // 70% transparentnosÅ¥
			attribution: 'Â© RainViewer',     // PovinnÃ© oznaÄenie zdroja
			maxZoom: 14,                     // Max zoom level pre radar
			zIndex: 1000                     // Radar mÃ¡ byÅ¥ nad zÃ¡kladnou mapou
		}).addTo(map);

		console.log(`âœ… Radar frame zobrazenÃ½: ${new Date(frame.time * 1000).toLocaleTimeString()}`);
	}

	// ==========================================================================
	// 6. ANIMÃCIA RADAR SNÃMOK
	// ==========================================================================
	
	/**
	 * toggleAnimation() - Zapne/vypne automatickÃº animÃ¡ciu radaru
	 * 
	 * PRINCÃP ANIMÃCIE:
	 * - setInterval() menÃ­ currentFrame kaÅ¾dÃ½ch 500ms
	 * - currentFrame sa cyklicky pohybuje 0 â†’ max â†’ 0
	 * - showRadarFrame() sa volÃ¡ pri kaÅ¾dej zmene
	 */
	function toggleAnimation() {
		if (isAnimating) {
			// ZASTAVENIE ANIMÃCIE:
			clearInterval(animationInterval); // ZruÅ¡Ã­ interval
			animationInterval = null;
			isAnimating = false;
			console.log('â¸ï¸ AnimÃ¡cia zastavenÃ¡');
		} else {
			// KONTROLA ÄŒI MÃME DÃTA:
			if (radarTimestamps.length === 0) {
				console.warn('âš ï¸ Å½iadne radar dÃ¡ta na animÃ¡ciu');
				return;
			}
			
			// SPUSTENIE ANIMÃCIE:
			isAnimating = true;
			console.log('â–¶ï¸ AnimÃ¡cia spustenÃ¡');
			
			// setInterval = opakuje funkciu kaÅ¾dÃ½ch 500ms
			animationInterval = setInterval(() => {
				// CYKLICKÃ POHYB: 0,1,2,...,max,0,1,2,...
				// % = modulo operÃ¡tor (zvyÅ¡ok po delenÃ­)
				currentFrame = (currentFrame + 1) % radarTimestamps.length;
				showRadarFrame(currentFrame);
			}, 500); // 500ms = 0.5 sekundy medzi snÃ­mkami
		}
	}

	// ==========================================================================
	// 7. MANUÃLNE OVLÃDANIE TIMELINE
	// ==========================================================================
	
	/**
	 * goToFrame() - PreskoÄ na konkrÃ©tnu radar snÃ­mku
	 * 
	 * @param {number} frameIndex - Index snÃ­mky kam skoÄiÅ¥
	 * 
	 * POUÅ½ITIE: timeline slider - pouÅ¾Ã­vateÄ¾ posÃºva slider
	 */
	function goToFrame(frameIndex) {
		// Zastav animÃ¡ciu ak beÅ¾Ã­ (manuÃ¡lne ovlÃ¡danie mÃ¡ prioritu)
		if (isAnimating) {
			toggleAnimation();
		}
		
		// Nastav novÃ½ frame a zobraz ho
		currentFrame = frameIndex;
		showRadarFrame(currentFrame);
		
		console.log(`ğŸ¯ ManuÃ¡lny preskok na frame ${frameIndex + 1}/${radarTimestamps.length}`);
	}

	// ==========================================================================
	// 8. LIFECYCLE - SPUSTENIE PO NAÄŒÃTANÃ KOMPONENTY
	// ==========================================================================
	
	/**
	 * onMount() - Svelte lifecycle hook
	 * 
	 * SpustÃ­ sa keÄ sa component pripojÃ­ do DOM
	 * = ako window.onload ale pre Svelte komponent
	 */
	onMount(async () => {
		console.log('ğŸš€ Component mounted - zaÄÃ­nam inicializÃ¡ciu...');
		
		try {
			// POSTUPNOSÅ¤ INICIALIZÃCIE:
			// 1. NaÄÃ­taj Leaflet kniÅ¾nicu
			await loadLeaflet();
			
			// 2. Vytvor mapu (ktorÃ¡ automaticky zÃ­ska radar dÃ¡ta)
			await initMap();
			
			console.log('ğŸ‰ InicializÃ¡cia dokonÄenÃ¡ ÃºspeÅ¡ne!');
			
		} catch (error) {
			console.error('ğŸ’¥ Chyba pri inicializÃ¡cii:', error);
		}
	});
</script>

<!-- 
=============================================================================
HTML TEMPLATE - VIZUÃLNA Å TRUKTÃšRA KOMPONENTY
=============================================================================
Svelte pouÅ¾Ã­va Å¡peciÃ¡lnu syntax:
- {expression} = JavaScript vÃ½raz v HTML
- on:event = event handler  
- bind:this = referencia na DOM element
- {#if condition} = podmienenÃ© renderovanie
=============================================================================
-->

<!-- HLAVIÄŒKY -->
<h1>ğŸŒ§ï¸ Weather Radar</h1>
<p class="subtitle">Real-time animovanÃ½ radar pre Slovensko a okolie</p>

<!-- STATUS PANEL - zobrazuje stav naÄÃ­tania -->
<div class="status">
	<h3>ğŸ“Š Status systÃ©mu</h3>
	
	<!-- bind: = reactive binding, zmena mapLoaded automaticky updatne UI -->
	<p><strong>Mapa:</strong> {mapLoaded ? 'âœ… NaÄÃ­tanÃ¡' : 'â³ NaÄÃ­tavam...'}</p>
	
	<!-- {#if} = podmienenÃ© renderovanie, zobrazÃ­ sa len ak je condition true -->
	{#if radarTimestamps.length > 0}
		<p><strong>Radar snÃ­mky:</strong> {radarTimestamps.length} dostupnÃ½ch</p>
		<p><strong>AktuÃ¡lna snÃ­mka:</strong> {currentFrame + 1}/{radarTimestamps.length}</p>
		<p><strong>ÄŒas snÃ­mky:</strong> {new Date(radarTimestamps[currentFrame]?.time * 1000).toLocaleString('sk-SK')}</p>
		<p><strong>AnimÃ¡cia:</strong> {isAnimating ? 'â–¶ï¸ BeÅ¾Ã­' : 'â¸ï¸ ZastavenÃ¡'}</p>
	{:else}
		<p><strong>Radar dÃ¡ta:</strong> â³ NaÄÃ­tavam...</p>
	{/if}
</div>

<!-- OVLÃDACIE PRVKY -->
<div class="controls">
	<h3>ğŸ® OvlÃ¡danie</h3>
	
	<!-- 
	TLAÄŒIDLO PLAY/PAUSE:
	- on:click = event handler
	- disabled = deaktivovanÃ© ak nie sÃº dÃ¡ta
	- {expression} = dynamickÃ½ text
	-->
	<button 
		on:click={toggleAnimation} 
		disabled={radarTimestamps.length === 0}
		class="play-button"
	>
		{isAnimating ? 'â¸ï¸ ZastaviÅ¥' : 'â–¶ï¸ SpustiÅ¥'} animÃ¡ciu
	</button>
	
	<!-- TIMELINE SLIDER - zobrazÃ­ sa len ak mÃ¡me dÃ¡ta -->
	{#if radarTimestamps.length > 0}
		<div class="timeline-control">
			<label>
				<strong>ğŸ“… ÄŒasovÃ¡ os:</strong> SnÃ­mka {currentFrame + 1} z {radarTimestamps.length}
				<br>
				<small>ğŸ’¡ Tip: Potiahnite slider pre manuÃ¡lne ovlÃ¡danie</small>
				
				<!-- 
				RANGE INPUT (slider):
				- min/max = rozsah hodnÃ´t
				- value = aktuÃ¡lna hodnota
				- on:input = event keÄ pouÅ¾Ã­vateÄ¾ posÃºva slider
				- parseInt() = konverzia string â†’ number
				-->
				<input 
					type="range" 
					min="0" 
					max={radarTimestamps.length - 1} 
					value={currentFrame}
					on:input={(e) => goToFrame(parseInt(e.target.value))}
					class="timeline-slider"
				/>
			</label>
		</div>
	{/if}
</div>

<!-- 
MAPA CONTAINER:
- bind:this = vytvorÃ­ referenciu mapContainer na tento DOM element
- Leaflet ho pouÅ¾ije ako target pre vytvorenie mapy
-->
<div bind:this={mapContainer} class="map"></div>

<!-- INFO PANEL - technickÃ© informÃ¡cie -->
<div class="info">
	<h3>â„¹ï¸ TechnickÃ© informÃ¡cie</h3>
	<ul>
		<li><strong>ğŸ—ºï¸ Mapa:</strong> OpenStreetMap (bez API key)</li>
		<li><strong>ğŸ“¡ Radar dÃ¡ta:</strong> RainViewer API (free)</li>
		<li><strong>ğŸ”„ AktualizÃ¡cia:</strong> KaÅ¾dÃ½ch 10 minÃºt</li>
		<li><strong>ğŸ“± Kompatibilita:</strong> Desktop + Mobile</li>
		<li><strong>ğŸŒ Pokrytie:</strong> GlobÃ¡lne radar dÃ¡ta</li>
		<li><strong>âš¡ TechnolÃ³gie:</strong> SvelteKit + Leaflet.js</li>
	</ul>
</div>

<!-- 
=============================================================================
CSS Å TÃLY - VIZUÃLNE FORMÃTOVANIE
=============================================================================
Svelte mÃ¡ scoped CSS - Å¡tÃ½ly platia len pre tento komponent
=============================================================================
-->
<style>
	/* =======================================================================
	   GLOBÃLNE Å TÃLY
	   ======================================================================= */
	
	/* Reset zÃ¡kladnÃ½ch Å¡tÃ½lov */
	* {
		box-sizing: border-box; /* padding a border sa poÄÃ­tajÃº do width */
	}

	/* HlavnÃ½ kontajner */
	:global(body) {
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
		line-height: 1.6; /* riadkovanie pre lepÅ¡iu ÄitateÄ¾nosÅ¥ */
		margin: 0;
		padding: 20px;
		background: #f5f7fa; /* jemnÃ© svetlo-sivÃ© pozadie */
	}

	/* =======================================================================
	   HLAVIÄŒKY A TEXTY
	   ======================================================================= */
	
	h1 {
		margin: 0 0 10px 0; /* margin: top right bottom left */
		color: #2c3e50;     /* tmavo modrÃ¡ */
		font-size: 2.5rem;  /* relatÃ­vna veÄ¾kosÅ¥ pÃ­sma */
		font-weight: 700;   /* tuÄnÃ© */
		text-align: center;
	}

	.subtitle {
		text-align: center;
		color: #7f8c8d;    /* svetlo Å¡edÃ¡ */
		margin: 0 0 30px 0;
		font-size: 1.1rem;
	}

	h3 {
		margin: 0 0 15px 0;
		color: #34495e;    /* tmavo Å¡edÃ¡ */
		font-size: 1.3rem;
	}

	/* =======================================================================
	   KARTY A PANELY
	   ======================================================================= */
	
	.status, .controls, .info {
		background: white;           /* biele pozadie */
		border-radius: 12px;        /* zaoblenÃ© rohy */
		padding: 20px;              /* vnÃºtornÃ½ spacing */
		margin-bottom: 20px;        /* spacing medzi kartami */
		box-shadow: 0 2px 10px rgba(0,0,0,0.1); /* jemnÃ½ tieÅˆ */
		border: 1px solid #e1e8ed;  /* jemnÃ½ border */
	}

	/* Texty v status paneli */
	.status p {
		margin: 8px 0;
		display: flex;              /* flexbox layout */
		justify-content: space-between; /* text vÄ¾avo, hodnota vpravo */
		align-items: center;
	}

	/* =======================================================================
	   OVLÃDACIE PRVKY
	   ======================================================================= */
	
	/* HlavnÃ© tlaÄidlo play/pause */
	.play-button {
		padding: 15px 30px;
		background: linear-gradient(135deg, #27ae60, #2ecc71); /* gradient pozadie */
		color: white;
		border: none;
		border-radius: 8px;
		cursor: pointer;
		font-size: 16px;
		font-weight: 600;
		transition: all 0.3s ease; /* smooth animÃ¡cie */
		margin-bottom: 20px;
		display: block;
		width: 100%;
	}

	/* Hover efekt pre tlaÄidlo */
	.play-button:hover:not(:disabled) {
		background: linear-gradient(135deg, #219a52, #27ae60);
		transform: translateY(-2px); /* mierne zdvihnutie */
		box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3); /* farebnÃ½ tieÅˆ */
	}

	/* DeaktivovanÃ© tlaÄidlo */
	.play-button:disabled {
		background: #bdc3c7; /* Å¡edÃ© pozadie */
		cursor: not-allowed;
		transform: none;
		box-shadow: none;
	}

	/* Timeline ovlÃ¡danie */
	.timeline-control {
		margin-top: 20px;
	}

	.timeline-control label {
		display: block;
		font-weight: 500;
		color: #2c3e50;
	}

	.timeline-control small {
		color: #7f8c8d;
		font-style: italic;
	}

	/* Timeline slider */
	.timeline-slider {
		width: 100%;           /* celÃ¡ Å¡Ã­rka kontajnera */
		height: 8px;           /* vÃ½Å¡ka tracku */
		border-radius: 4px;
		background: #ddd;      /* farba tracku */
		outline: none;
		margin-top: 10px;
		cursor: pointer;
	}

	/* Slider thumb (posÃºvaÄ) */
	.timeline-slider::-webkit-slider-thumb {
		appearance: none;      /* odstrÃ¡ni default styling */
		width: 24px;
		height: 24px;
		border-radius: 50%;    /* kruhovÃ½ tvar */
		background: #e74c3c;   /* ÄervenÃ¡ farba */
		cursor: pointer;
		box-shadow: 0 2px 6px rgba(0,0,0,0.2);
		transition: all 0.2s ease;
	}

	/* Hover efekt pre slider thumb */
	.timeline-slider::-webkit-slider-thumb:hover {
		background: #c0392b;   /* tmavÅ¡ia ÄervenÃ¡ */
		transform: scale(1.1); /* mierne zvÃ¤ÄÅ¡enie */
	}

	/* Firefox slider styling */
	.timeline-slider::-moz-range-thumb {
		width: 24px;
		height: 24px;
		border-radius: 50%;
		background: #e74c3c;
		cursor: pointer;
		border: none;
	}

	/* =======================================================================
	   MAPA
	   ======================================================================= */
	
	.map {
		width: 100%;                /* celÃ¡ Å¡Ã­rka kontajnera */
		height: 500px;              /* fixnÃ¡ vÃ½Å¡ka */
		border: 2px solid #34495e;  /* tmavo Å¡edÃ½ border */
		border-radius: 12px;        /* zaoblenÃ© rohy */
		overflow: hidden;           /* skryje content Äo presahuje */
		margin-bottom: 20px;
		box-shadow: 0 4px 20px rgba(0,0,0,0.15); /* vÃ½raznejÅ¡Ã­ tieÅˆ */
	}

	/* =======================================================================
	   INFO PANEL
	   ======================================================================= */
	
	.info ul {
		margin: 0;
		padding-left: 20px;    /* odsadenie bulletov */
	}

	.info li {
		margin: 8px 0;         /* spacing medzi poloÅ¾kami */
		color: #555;           /* tmavo Å¡edÃ¡ farba textu */
	}

	/* =======================================================================
	   RESPONSIVE DESIGN - MOBILE ZARIADENIA
	   ======================================================================= */
	
	/* Tablets a menÅ¡ie (768px a menej) */
	@media (max-width: 768px) {
		:global(body) {
			padding: 15px;     /* menÅ¡Ã­ padding na mobile */
		}

		h1 {
			font-size: 2rem;   /* menÅ¡Ã­ nadpis */
		}

		.map {
			height: 400px;     /* niÅ¾Å¡ia mapa na mobile */
		}

		.status, .controls, .info {
			padding: 15px;     /* menÅ¡Ã­ padding v kartÃ¡ch */
		}
	}

	/* MalÃ© mobily (480px a menej) */
	@media (max-width: 480px) {
		:global(body) {
			padding: 10px;
		}

		h1 {
			font-size: 1.8rem;
		}

		.map {
			height: 350px;     /* eÅ¡te niÅ¾Å¡ia mapa */
		}

		.status p {
			flex-direction: column;    /* stack text vertically */
			align-items: flex-start;
			gap: 4px;
		}
	}
</style>